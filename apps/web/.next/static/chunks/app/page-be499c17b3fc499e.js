(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6700:function(e,t,n){Promise.resolve().then(n.bind(n,3774))},3774:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n(7573),i=n(7653);let s="http://localhost:4000";function c(){let[e,t]=(0,i.useState)("demo@example.com"),[n,c]=(0,i.useState)("secret12"),[o,l]=(0,i.useState)(null),[r,h]=(0,i.useState)(null);async function u(e,t){let n=await fetch("".concat(s).concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await n.json()}async function d(){if(!e||!n)return alert("Please enter email and password");l((await u("/auth/register",{email:e,password:n})).access_token)}async function p(){l((await u("/auth/login",{email:e,password:n})).access_token)}async function f(){let e="demo-".concat(Date.now(),".txt"),t=await fetch("".concat(s,"/storage/signed-put-url?key=").concat(e,"&contentType=text/plain"));h((await t.text()).replace(/"/g,""))}async function x(){r&&(await fetch(r,{method:"PUT",body:"hello from next!"}),alert("uploaded to MinIO"))}return(0,a.jsxs)("main",{style:{padding:24,fontFamily:"sans-serif"},children:[(0,a.jsx)("h1",{children:"Hybrid Dev: DB+MinIO in Docker, API/Web on Host"}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{children:"Auth"}),(0,a.jsx)("input",{placeholder:"email",value:e,onChange:e=>t(e.target.value)}),(0,a.jsx)("input",{placeholder:"password",type:"password",value:n,onChange:e=>c(e.target.value)}),(0,a.jsx)("button",{onClick:d,children:"Register"}),(0,a.jsx)("button",{onClick:p,children:"Login"}),(0,a.jsxs)("p",{children:["JWT: ",o?o.slice(0,20)+"...":"—"]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{children:"Storage"}),(0,a.jsx)("button",{onClick:f,children:"Get Signed PUT URL"}),(0,a.jsx)("p",{style:{wordBreak:"break-all"},children:r||"—"}),(0,a.jsx)("button",{onClick:x,disabled:!r,children:"Upload sample file"})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{children:"Health"}),(0,a.jsx)("button",{onClick:async()=>{alert(JSON.stringify(await fetch("".concat(s,"/health")).then(e=>e.json())))},children:"Ping API"})]})]})}}},function(e){e.O(0,[293,286,744],function(){return e(e.s=6700)}),_N_E=e.O()}]);